# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is an ESLint plugin for enforcing RSCSS (Reasonable System for CSS Stylesheet Structure) conventions. RSCSS is a methodology for organizing CSS with component-based architecture.

**Important**: This plugin requires @eslint/css parser and ESLint v9.6.0 or higher.

## Development Commands

- `pnpm install` - Install dependencies
- `pnpm test` - Run tests with Vitest (watch mode)
- `pnpm test --run` - Run tests without watch mode
- `pnpm run build` - Build the plugin with tsup (outputs to dist/)
- `pnpm run check:type` - TypeScript type checking
- `pnpm run dev` - Build in watch mode

## Project Structure

```
eslint-plugin-rscss/
├── src/
│   ├── index.ts                      # Plugin entry point and exports
│   ├── config.ts                     # Recommended configuration
│   └── rules/
│       ├── class-format.ts           # RSCSS class naming conventions
│       └── no-descendant-combinator.ts # Prevents descendant combinators
├── tests/
│   ├── test-utils.ts                 # Test utilities and RuleTester setup
│   ├── class-format.test.ts          # Tests for class-format rule
│   └── no-descendant-combinator.test.ts # Tests for no-descendant-combinator rule
├── dist/                             # Built files (generated by tsup)
├── package.json                      # Dependencies and scripts
├── tsconfig.json                     # TypeScript configuration
├── tsup.config.ts                    # Build configuration
└── vitest.config.ts                  # Test configuration
```

## Implemented Rules

### class-format
Enforces RSCSS class naming conventions:
- **Components**: 2+ words with hyphens (e.g., `component-name`, `search-form`)
- **Elements**: single word (e.g., `element`, `input`, `title`)
- **Variants**: start with hyphen (e.g., `-primary`, `-highlighted`)
- **Helpers**: start with underscore (e.g., `_helper`, `_clearfix`)

Options:
- `allowPascalCase`: Allow PascalCase for components
- `allowCamelCase`: Allow camelCase for elements

### no-descendant-combinator
Prevents descendant combinators (space) in CSS selectors, enforcing direct child combinator (>) usage.

Valid: `.parent > .child`
Invalid: `.parent .child`

## Dependencies

### Production
- `@eslint/css` ^0.1.0 - CSS parser for ESLint

### Development
- `@types/node` ^24.0.13 - Node.js type definitions
- `@typescript-eslint/rule-tester` ^8.0.0 - Rule testing utilities
- `tsup` ^8.0.0 - Build tool
- `typescript` ^5.5.0 - TypeScript compiler
- `vitest` ^2.0.0 - Test framework

## ESLint Plugin Development Notes

- Uses @eslint/css parser for CSS processing with CSSTree AST
- Rules use ESLint's `Rule.RuleModule` type
- Tests use `@typescript-eslint/rule-tester` with Vitest
- Follow TDD approach: write tests first, then implement rules
- TypeScript is used for type safety
- Uses `require('@eslint/css')` in test-utils.ts for parser import

## Package Manager

This project uses pnpm as the package manager (version 10.12.1).

## Testing

- Run tests with `pnpm test --run` (prefer this to avoid watch mode)
- Tests are located in `tests/` directory
- Each rule has comprehensive test coverage including:
  - Valid CSS cases that should pass
  - Invalid CSS cases that should trigger errors
  - Edge cases and complex selectors
  - Configuration options testing
- Tests validate both CSS and SCSS-like syntax